{% extends 'base.html' %} {% block content %}

<h1>Queen Detail</h1>

<div class="row">
  <div class="col s5">
    <div class="card">
      <div class="card-content">
        <span class="card-title">{{ queen.name }}</span>
        <p>Season: {{ queen.season }}</p>
        <p>Description: {{ queen.description }}</p>
        {% if queen.winner == True %}
        <p>ðŸ‘‘</p>
        {% else %}
        <p>(no wins yet)</p>
        {% endif %}
      </div>
      <div class="card-action">
        <a href="{% url 'queens_update' queen.id %}">Edit</a>
        <a href="{% url 'queens_delete' queen.id %}">Delete</a>
      </div>
    </div>
  </div>
  <div class="col s7">
    <form action="{% url 'add_lipsync' queen.id %}" method="post">
      {% csrf_token %} {{ lipsyncs_form.as_p }}
      <input type="submit" class="btn" value="Add Lipsync">
    </form>
    <table class="striped">
      <thead>
        <tr>
          <th>Season</th>
          <th>Episode</th>
          <th>vs.</th>
          <th>Song</th>
        </tr>
      </thead>
      <tbody>
        {% for lipsync in queen.lipsyncs_set.all %}
        <tr>
          <td>{{ lipsync.season }}</td>
          <td>{{ lipsync.episode }}</td>
          <td>{{ lipsync.vs }}</td>
          <td>{{ lipsync.song }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
<hr>
<div class="row">
  <div class="col s6">
    <h3>{{ queen.name }} 's Runway Categories Walked</h3>
    {% if queen.category.count %} {% for walk in queen.category.all %}
    <div class="card">
      <div class="card-content">
        {{ walk.name }}
      </div>
      <div class="card-action">
        <form action="{% url assoc_category_delete queen.id category.id %}" method="post">
          {% csrf_token %}
          <button type="submit" class="btn red">Remove</button>
        </form>
      </div>
    </div>
    {% endfor %} {% else %} 
    <h5>She hasn't walked any categories yet.</h5>
    {% endif %}
  </div>
</div>
<div class="col s6">
  <h3>Catgories Available to Walk</h3>
  {% if category.count %} {% for walk in category.all %}
  <div class="card">
    <div class="card-content">
      {{ walk.name }}
    </div>
    <div class="card-action">
      <form action="{% url assoc_category queen.id category.id %}" method="post">
        {% csrf_token %}
        <button type="submit" class="btn">Walk the Runway!</button>
      </form>
    </div>
  </div>
  {% endfor %} {% else %}
  <h5>{{ queen.name }} has already walked all categories.</h5>
  {% endif %}
</div>

{% endblock %}

<!-- Add all the show code for Category in this file as well -->